<!DOCTYPE html>
<head>
	<meta charset="utf-8">
	<title>Spector</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<script src="/assets/js/package.js"></script>

	<link href='http://fonts.googleapis.com/css?family=Roboto:300,400,500,700' rel='stylesheet' type='text/css' async>

	<link rel="icon" type="image/png" sizes="128x128" href="/assets/ico/128.png">
	<link rel="icon" type="image/png" sizes="24x24" href="/assets/ico/24.png">

	<link rel="shortcut icon" href="/assets/ico/24.png">
</head>
<body>
	<canvas id="view"></canvas>

	<style>
		* { box-sizing: border-box; }
		#view {
			position: fixed;
			top: 0; left: 0;
			border: 1px solid #000;
		}
	</style>

	<script type="text/javascript" src="/spector/util/utf8.js"></script>
	<script type="text/javascript" src="/spector/protocol.js"></script>
	<script type="text/javascript" src="/spector/stream.js"></script>

	<script type="text/javascript" src="/spector/import/simulator.js"></script>
	<script type="text/javascript" src="/spector/import/tracing.js"></script>

	<script type="text/javascript" src="/spector/trace.js"></script>
	<script type="text/javascript" src="/spector/trace.view.js"></script>

	<script>
		var stream = new spector.import.simulator.Stream();
		var trace = new spector.Trace();
		var traceview = new spector.Trace.View();

		var canvas = document.getElementById("view");
		var context = canvas.getContext("2d");

		function render(){
			canvas.width = window.innerWidth - 4;
			canvas.height = window.innerHeight - 4;
			var size = {x: canvas.width, y: canvas.height};
			context.clearRect(0, 0, size.x, size.y);

			trace.consume(stream);
			traceview.render(context, trace, size);
			requestAnimationFrame(render);
		}

		render();
	</script>
</body>